<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Blog Technique - Djoulde Barry</title>
    <link rel="stylesheet" href="explore.css"> <!-- On garde le m√™me design -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <!-- √Ä int√©grer dans ton fichier HTML (si ce n'est pas d√©j√† fait) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>">

</head>
<body>
    <nav class="navbar">
        <div class="nav-left">
            <!--
            <a href="index.html" class="logo-db">
                <span>D</span><span>B</span>
            </a>         
            -->   
            <a href="explore.html" class="back-button">‚Üê Retour</a>
        </div>
        <!--
        <ul class="nav-links">
            <li><a href="index.html#about">√Ä propos</a></li>
            <li><a href="index.html#competences">Comp√©tences</a></li>
            <li><a href="index.html#projects">Projets</a></li>
            <li><a href="blog.html" class="active">Blog</a></li>
            <li><a href="blog.html#veille">Veille Technologique</a></li>
        </ul>
        -->
    </nav>

    <video autoplay muted loop id="background-video">
        <source src="videos/background.mp4" type="video/mp4">
        Votre navigateur ne supporte pas les vid√©os.
    </video>
    
    <!-- Section des articles -->
    <section class="main-container">
        <div class="section-header">
            <h1>üìñ Blog Technique</h1>
            <p>Retrouvez ici mes articles techniques et retours d'exp√©rience.</p>
        </div>
    
        <!-- Conteneur Flex pour aligner les deux blocs horizontalement -->
        <div class="blog-content">
            <!-- üìå Bloc "Article" -->
            <div class="article-container">
                <h2 id="article-header">Chargement...</h2>
                <p id="article-description">Chargement du contenu...</p>
                <div id="article-content"></div>

                <!-- üîπ Bouton modifi√© pour charger dynamiquement l'article -->
                <a id="read-article-btn" href="#" class="btn">Lire l'article</a>
            </div>
    
            <!-- üìå Bloc "Mes articles externes" -->
            <div class="external-articles">
                <h2>üåç Mes articles externes</h2>
                <div id="external-articles-container" class="external-grid">
                    <!-- Les articles externes seront ajout√©s ici via JS -->
                </div>
                <div class="external-links">
                    <a href="https://dev.to/" target="_blank" class="btn-link">üîó Voir plus sur Dev.to</a>
                    <a href="https://medium.com/@barrydjoulde15" target="_blank" class="btn-link">üîó Voir plus sur Medium</a>
                </div>
            </div>
        </div>
    </section>
    
    
    <script>
        async function fetchArticles() {
            const devToTags = ["dataengineering", "bigdata", "kubernetes", "python"]; // Tags cibl√©s
            let articles = [];

            // üîπ 1. R√©cup√©rer les articles de Dev.to
            for (let tag of devToTags) {
                const url = `https://dev.to/api/articles?tag=${tag}&per_page=1`; // R√©cup√®re 1 article/tag
                try {
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    articles.push(...data.map(article => ({
                        title: article.title,
                        link: article.url,
                        source: `Dev.to - #${tag}`,
                        date: new Date(article.published_at)
                    })));
                } catch (error) {
                    console.error(`Erreur r√©cup√©ration Dev.to (${tag})`, error);
                }
            }

            // üîπ 2. R√©cup√©rer les articles de Medium via RSS (converti en JSON)
            try {
                const response = await fetch("https://api.rss2json.com/v1/api.json?rss_url=https://medium.com/@barrydjoulde15/feed");
                const data = await response.json();

                if (data.items) {
                    articles.push(...data.items.slice(0, 1).map(item => ({
                        title: item.title,
                        link: item.link,
                        source: "Medium",
                        date: new Date(item.pubDate)
                    })));
                }
            } catch (error) {
                console.error("Erreur r√©cup√©ration Medium", error);
            }

            // üîπ 3. Trier les articles par date (les plus r√©cents en premier)
            articles.sort((a, b) => b.date - a.date);

            // üîπ 4. Afficher dynamiquement les articles dans la carte "Mes articles externes"
            displayArticles(articles);
        }

        function displayArticles(articles) {
            const container = document.getElementById("external-articles-container");
            container.innerHTML = articles.slice(0, 3).map(article => `
                <div class="external-article">
                    <p><strong>${article.source} :</strong> <a href="${article.link}" target="_blank">${article.title}</a></p>
                </div>
            `).join('');
        }

        // Charger les articles au chargement de la page
        fetchArticles();

    </script>
    

        <!-- üì° Section Veille Technologique -->
    <!-- üì° Section Veille Technologique -->
    <section class="main-container">
        <div class="section-header">
            <h1>üì° Veille Technologique</h1>
            <p>Mes sources pr√©f√©r√©es pour rester √† jour sur l'√©cosyst√®me tech et data.</p>
        </div>
        <div id="veille-container" class="card-container veille-cards">
            <!-- Le contenu sera g√©n√©r√© dynamiquement ici -->
        </div>
    </section>

    <script>
        async function loadVeilleData() {
            const response = await fetch("veille.json"); // Chargement du JSON
            const data = await response.json();
        
            const categories = {
                "podcasts": "üéô Podcasts",
                "newsletters": "üì© Newsletters",
                "youtube": "üì∫ Cha√Ænes YouTube"
            };
        
            let veilleHTML = "";
        
            let totalSources = 0; // Compteur des sources
        
            for (let key in categories) {
                if (data[key]) {
                    totalSources += data[key].length; // On compte le nombre total de sources
        
                    veilleHTML += `
                        <div class="card">
                            <h2>${categories[key]}</h2>
                            <ul class="styled-list no-check">
                                ${data[key].map(item => `
                                    <li>
                                        <img src="${item.icon}" class="icon"> 
                                        <a href="${item.url}" target="_blank">${item.name}</a>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    `;
                }
            }
        
            document.getElementById("veille-container").innerHTML = veilleHTML;
        
            // V√©rification des nouvelles sources
            checkNewVeille(totalSources);
        }
        
        function checkNewVeille(currentCount) {
            let oldCount = localStorage.getItem("veilleCount") || 0;
        
            if (currentCount > oldCount) {
                alert("üì¢ Une nouvelle source de veille technologique a √©t√© ajout√©e !");
                localStorage.setItem("veilleCount", currentCount);
            }
        }
        
        loadVeilleData(); // Ex√©cution du script
    </script>

    <footer class="footer">
        <div class="footer-left">
            <h3>En savoir plus ? üìö</h3>
            <p>D√©couvrez mes r√©alisations techniques et mes derni√®res publications.</p>
            <div class="footer-icons">
                <a href="https://www.linkedin.com/in/djould%C3%A9-barry-24868a187" target="_blank">
                    <i class="fab fa-linkedin fa-2x" style="color: #0077B5;"></i>
                </a>
                <a href="https://gitlab.com/barrydjoulde" target="_blank">
                    <i class="fab fa-gitlab fa-2x" style="color: #FCA121;"></i>
                </a>
                <a href="https://x.com/Barrydjoul" target="_blank">
                    <i class="fa-brands fa-x-twitter fa-2x" style="color: #000;"></i>
                </a>                  
            </div>            
        </div>
    
        <!-- Ajout d'une section citations -->
        <div class="footer-quotes">
            <blockquote>‚ÄúTalk is cheap. Show me the code.‚Äù ‚Äì Linus Torvalds</blockquote>
            <!--<blockquote>‚ÄúPrograms must be written for people to read, and only incidentally for machines to execute.‚Äù ‚Äì Harold Abelson</blockquote>-->
            <blockquote>‚ÄúSimplicity is the soul of efficiency.‚Äù ‚Äì Austin Freeman</blockquote>
        </div>
    </footer>
    
    <!--
    <script>
        // Liste de citations inspirantes pour les devs
        const quotes = [
            "‚ÄúCode is like humor. When you have to explain it, it‚Äôs bad.‚Äù ‚Äì Cory House",
            "‚ÄúFirst, solve the problem. Then, write the code.‚Äù ‚Äì John Johnson",
            "‚ÄúThe best way to predict the future is to invent it.‚Äù ‚Äì Alan Kay",
            "‚ÄúSimplicity is the soul of efficiency.‚Äù ‚Äì Austin Freeman",
            "‚ÄúTalk is cheap. Show me the code.‚Äù ‚Äì Linus Torvalds",
            "‚ÄúYour most unhappy customers are your greatest source of learning.‚Äù ‚Äì Bill Gates",
            "‚ÄúThe function of good software is to make the complex appear simple.‚Äù ‚Äì Grady Booch"
        ];
    
        // Afficher une citation al√©atoire
        document.getElementById("quote").innerText = quotes[Math.floor(Math.random() * quotes.length)];
    </script>
    -->
    <script>
        async function fetchLatestArticle() {
            try {
                const response = await fetch("https://dev.to/api/articles?username=djouldbarry_ee2&per_page=1");
                if (!response.ok) throw new Error("Erreur de chargement des articles");

                const articles = await response.json();
                if (articles.length === 0) throw new Error("Aucun article trouv√©");

                const latestArticle = articles[0]; // R√©cup√®re le dernier article publi√©
                const articleId = latestArticle.id;

                // Mise √† jour du titre et description
                document.getElementById("article-header").innerText = latestArticle.title;
                document.getElementById("article-description").innerText = latestArticle.description;

                // Ajoute un extrait de l'article (√©vite la r√©p√©tition du titre)
                const articleContent = document.getElementById("article-content");

                // V√©rifier s'il y a un contenu utilisable
                if (latestArticle.body_html) {
                    let articleText = latestArticle.body_html
                        .replace(/<h1[^>]*>.*?<\/h1>/i, '') // Supprime les titres H1
                        .replace(/<[^>]+>/g, ''); // Supprime les balises HTML

                    articleContent.innerText = articleText.substring(0, 200) + "...";
                } else {
                    articleContent.innerText = "Aper√ßu non disponible.";
                }

                // Modifier dynamiquement le lien du bouton pour pointer vers `article.html` avec l'ID
                document.getElementById("read-article-btn").href = `article.html?id=${articleId}`;
            } catch (error) {
                console.error("Erreur lors de la r√©cup√©ration de l'article :", error);
                document.getElementById("article-header").innerText = "Erreur de chargement";
                document.getElementById("article-description").innerText = "Impossible de r√©cup√©rer l'article.";
                document.getElementById("article-content").innerText = "";
            }
        }

        // Ex√©cuter la fonction au chargement
        fetchLatestArticle();

    </script>    
    
</body>
</html>
