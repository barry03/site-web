<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon CV - DjouldÃ© Barry</title>
    <link rel="stylesheet" href="cv.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“Š</text></svg>">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GJ00TBQ7SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-GJ00TBQ7SX');
    </script>
    <script>
        gtag('set', {
          user_properties: {
            tester: 'djoulde'
          }
        });
    </script>
      

</head>
<body>

    <!-- Navigation -->
    <nav class="navbar">
        <a href="index.html" class="back-button">â† Retour</a>
        <button class="toggle-dark-mode" onclick="toggleDarkMode()">ğŸŒ™ Mode Sombre</button>
        <h1>Mon CV/My Resume</h1>
    </nav>

    <!-- Conteneur principal -->
    <section class="cv-container">
        <div class="cv-box">
            <h2>ğŸ“„ French Version</h2>
            <p class="cv-description"><i class="fas fa-file-alt"></i> Un rÃ©sumÃ© dÃ©taillant mon parcours et mes compÃ©tences en Data Engineering.</p>
            <iframe src="files/CV_Barry_FR.pdf" class="cv-frame"></iframe>
            <p id="cv-fr" class="cv-update-date"></p>
    
            <div class="cv-buttons">
                <button class="btn-copy" onclick="copyCvLink('files/CV_Barry_FR.pdf')">ğŸ“‹ Partagez le profil </button>
                <a href="files/CV_Barry_FR.pdf" download class="btn-download" onclick="gtag('event', 'cv_download', { cv_version: 'fr' });">ğŸ“¥ TÃ©lÃ©charger</a>
            </div>
        </div>
    
        <div class="cv-box">
            <h2>ğŸ“„ English Version</h2>
            <p class="cv-description"><i class="fas fa-file-alt"></i> English resume showcasing my experience in Big Data & Cloud Solutions.</p>
            <iframe src="files/CV_Barry_EN.pdf" class="cv-frame"></iframe>
            <p id="cv-en" class="cv-update-date"></p>
    
            <div class="cv-buttons">
                <button class="btn-copy" onclick="copyCvLink('files/CV_Barry_EN.pdf')">ğŸ“‹ Share profil</button>
                <a href="files/CV_Barry_EN.pdf" download class="btn-download"
                onclick="gtag('event', 'cv_download', { cv_version: 'en' });">ğŸ“¥ Download</a>
            </div> 
        </div>
    </section>
    
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Liste des fichiers CV
            const cvs = [
                { id: "cv-fr", file: "files/CV_Barry_FR.pdf", recentId: "recent-update-fr" },
                { id: "cv-en", file: "files/CV_Barry_EN.pdf", recentId: "recent-update-en" }
            ];
    
            cvs.forEach(cv => {
                fetch(cv.file, { method: 'HEAD' })
                    .then(response => {
                        let lastModified = response.headers.get("Last-Modified");
                        if (lastModified) {
                            let date = new Date(lastModified);
                            let formattedDate = date.toLocaleDateString("fr-FR", {
                                year: "numeric",
                                month: "long",
                                day: "numeric"
                            });
    
                            document.getElementById(cv.id).textContent = `DerniÃ¨re mise Ã  jour : ${formattedDate}`;
                            
                            // VÃ©rifie si la mise Ã  jour est rÃ©cente (moins de 3 mois)
                            let today = new Date();
                            let diffTime = Math.abs(today - date);
                            let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                            
                            if (diffDays <= 90) {
                                document.getElementById(cv.recentId).textContent = "ğŸš€ Mise Ã  jour rÃ©cente";
                            }
                        }
                    })
                    .catch(error => console.log("Erreur lors de la rÃ©cupÃ©ration de la date :", error));
            });

            document.querySelectorAll(".cv-frame").forEach((iframe) => {
                iframe.style.display = "block"; // Afficher directement les CV
            });
        });

        function copyCvLink(fileUrl) {
            let fullUrl = window.location.origin + "/" + fileUrl;
            navigator.clipboard.writeText(fullUrl).then(() => {
                alert("ğŸ“‹ Link copied : " + fullUrl);
            }).catch(err => {
                console.error("Erreur lors de la copie du lien", err);
            });
        }
        function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");
            let mode = document.body.classList.contains("dark-mode") ? "dark" : "light";
            localStorage.setItem("theme", mode);
        }

        // Conserve le mode choisi par l'utilisateur
        document.addEventListener("DOMContentLoaded", function () {
            if (localStorage.getItem("theme") === "dark") {
                document.body.classList.add("dark-mode");
            }
        });
    </script>    

</body>
</html>